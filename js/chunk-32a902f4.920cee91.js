(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32a902f4"],{"1dde":function(e,t,c){var o=c("d039"),n=c("b622"),a=c("2d00"),r=n("species");e.exports=function(e){return a>=51||!o((function(){var t=[],c=t.constructor={};return c[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"76db":function(e,t,c){"use strict";c.r(t);c("b0c0");var o=c("7a23"),n={class:"container"},a={class:"mt-4"},r={class:"table align-middle"},l=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,"圖片"),Object(o["createElementVNode"])("th",null,"商品名稱"),Object(o["createElementVNode"])("th",null,"價格"),Object(o["createElementVNode"])("th",null,"功能")])],-1),s={style:{width:"200px"}},i={key:0,class:"h5"},d={key:1},u={class:"h6"},b={class:"h5"},m={class:"btn-group btn-group-sm"},p=["onClick","disabled"],h={key:0,class:"spinner-border spinner-grow-sm"},O=Object(o["createTextVNode"])(" 查看更多 "),j=["onClick","disabled"],f={key:0,class:"spinner-grow spinner-grow-sm"},g=Object(o["createTextVNode"])(" 加到購物車 "),V={class:"text-end"},v={class:"table align-middle"},N=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th"),Object(o["createElementVNode"])("th",null,"品名"),Object(o["createElementVNode"])("th",{style:{width:"150px"}},"數量"),Object(o["createElementVNode"])("th",null,"單價")])],-1),E=["disabled","onClick"],y=Object(o["createElementVNode"])("i",{class:"bi bi-x"},null,-1),k=[y],C={key:0,class:"text-success"},x={class:"input-group input-group-sm"},L=["onUpdate:modelValue","onBlur"],S={class:"input-group-text"},$={class:"text-end"},B={key:0,class:"text-success"},w=Object(o["createElementVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),M={class:"text-end"},_={key:0},I=Object(o["createElementVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),D={class:"text-end text-success"},T={class:"input-group mb-3 input-group-sm"},U={class:"input-group-append"},z={class:"my-5 row justify-content-center"},q={class:"mb-3"},F=Object(o["createElementVNode"])("label",{for:"email",class:"form-label"},"Email",-1),A={class:"mb-3"},P=Object(o["createElementVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),J={class:"mb-3"},G=Object(o["createElementVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),H={class:"mb-3"},K=Object(o["createElementVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),Q={class:"mb-3"},R=Object(o["createElementVNode"])("label",{for:"message",class:"form-label"},"留言",-1),W=Object(o["createElementVNode"])("div",{class:"text-end"},[Object(o["createElementVNode"])("button",{class:"btn btn-danger"},"送出訂單")],-1);function X(e,t,c,y,X,Y){var Z=Object(o["resolveComponent"])("Loading"),ee=Object(o["resolveComponent"])("Field"),te=Object(o["resolveComponent"])("ErrorMessage"),ce=Object(o["resolveComponent"])("Form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",n,[Object(o["createVNode"])(Z,{active:X.isLoading,"z-index":1060},null,8,["active"]),Object(o["createElementVNode"])("div",a,[Object(o["createElementVNode"])("table",r,[l,Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(X.products,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:e.id},[Object(o["createElementVNode"])("td",s,[Object(o["createElementVNode"])("div",{style:Object(o["normalizeStyle"])([{backgroundImage:"url(".concat(e.imageUrl,")")},{height:"100px","background-size":"cover","background-position":"center"}])},null,4)]),Object(o["createElementVNode"])("td",null,Object(o["toDisplayString"])(e.title),1),Object(o["createElementVNode"])("td",null,[e.price===e.origin_price?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",i,Object(o["toDisplayString"])(e.price)+" 元 ",1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",d,[Object(o["createElementVNode"])("del",u,"原價 "+Object(o["toDisplayString"])(e.origin_price)+" 元",1),Object(o["createElementVNode"])("div",b,"現在只要 "+Object(o["toDisplayString"])(e.price)+" 元",1)]))]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",m,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(t){return Y.getProduct(e.id)},disabled:X.status.loadingItem===e.id||!e.is_enabled},[X.status.loadingItem===e.id?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",h)):Object(o["createCommentVNode"])("",!0),O],8,p),Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-danger",onClick:function(t){return Y.addToCart(e.id)},disabled:X.status.loadingItem===e.id||!e.is_enabled},[X.status.loadingItem===e.id?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",f)):Object(o["createCommentVNode"])("",!0),g],8,j)])])])})),128))])]),Object(o["createElementVNode"])("div",V,[Object(o["createElementVNode"])("button",{class:"btn btn-outline-danger",type:"button",onClick:t[0]||(t[0]=function(){return Y.deleteAllCarts&&Y.deleteAllCarts.apply(Y,arguments)})}," 清空購物車 ")]),Object(o["createElementVNode"])("table",v,[N,Object(o["createElementVNode"])("tbody",null,[X.cart.carts?(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],{key:0},Object(o["renderList"])(X.cart.carts,(function(t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:t.id},[Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:X.status.loadingItem===t.id,onClick:function(c){return e.removeCartItem(t.id)}},k,8,E)]),Object(o["createElementVNode"])("td",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.product.title)+" ",1),t.coupon?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",C,"已套用優惠券")):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",x,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":function(e){return t.qty=e},onBlur:function(e){return Y.updateCart(t)}},null,40,L),[[o["vModelText"],t.qty,void 0,{number:!0}]]),Object(o["createElementVNode"])("div",S,Object(o["toDisplayString"])(t.product.unit),1)])]),Object(o["createElementVNode"])("td",$,[X.cart.final_total!==X.cart.total?(Object(o["openBlock"])(),Object(o["createElementBlock"])("small",B,"折扣價: ")):Object(o["createCommentVNode"])("",!0),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.$filters.currency(t.final_total)),1)])])})),128)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("tfoot",null,[Object(o["createElementVNode"])("tr",null,[w,Object(o["createElementVNode"])("td",M,Object(o["toDisplayString"])(e.$filters.currency(X.cart.total)),1)]),X.cart.final_total!==X.cart.total?(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",_,[I,Object(o["createElementVNode"])("td",D,Object(o["toDisplayString"])(e.$filters.currency(X.cart.final_total)),1)])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",T,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return X.coupon_code=e}),placeholder:"請輸入優惠碼"},null,512),[[o["vModelText"],X.coupon_code]]),Object(o["createElementVNode"])("div",U,[Object(o["createElementVNode"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[2]||(t[2]=function(){return Y.addCouponCode&&Y.addCouponCode.apply(Y,arguments)})}," 套用優惠碼 ")])])]),Object(o["createElementVNode"])("div",z,[Object(o["createVNode"])(ce,{ref:"form",class:"col-md-6",onSubmit:Y.createOrder},{default:Object(o["withCtx"])((function(e){var c=e.errors;return[Object(o["createElementVNode"])("div",q,[F,Object(o["createVNode"])(ee,{id:"email",name:"email",type:"email",class:Object(o["normalizeClass"])(["form-control",{"is-invalid":c["email"]}]),placeholder:"請輸入 Email",modelValue:X.form.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return X.form.user.email=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(te,{name:"email",class:"invalid-feedback"})]),Object(o["createElementVNode"])("div",A,[P,Object(o["createVNode"])(ee,{id:"name",name:"姓名",type:"text",class:Object(o["normalizeClass"])(["form-control",{"is-invalid":c["姓名"]}]),placeholder:"請輸入姓名",modelValue:X.form.user.name,"onUpdate:modelValue":t[4]||(t[4]=function(e){return X.form.user.name=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(te,{name:"姓名",class:"invalid-feedback"})]),Object(o["createElementVNode"])("div",J,[G,Object(o["createVNode"])(ee,{id:"tel",name:"電話",type:"tel",class:Object(o["normalizeClass"])(["form-control",{"is-invalid":c["電話"]}]),placeholder:"請輸入電話",modelValue:X.form.user.tel,"onUpdate:modelValue":t[5]||(t[5]=function(e){return X.form.user.tel=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(te,{name:"電話",class:"invalid-feedback"})]),Object(o["createElementVNode"])("div",H,[K,Object(o["createVNode"])(ee,{id:"address",name:"地址",type:"text",class:Object(o["normalizeClass"])(["form-control",{"is-invalid":c["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:X.form.user.address,"onUpdate:modelValue":t[6]||(t[6]=function(e){return X.form.user.address=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(te,{name:"地址",class:"invalid-feedback"})]),Object(o["createElementVNode"])("div",Q,[R,Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[7]||(t[7]=function(e){return X.form.message=e})},null,512),[[o["vModelText"],X.form.message]])]),W]})),_:1},8,["onSubmit"])])])}c("99af");var Y={data:function(){return{products:[],cartData:{},status:{LoadingItem:""},form:{user:{name:"",email:"",tel:"",address:""},message:""},cart:{},isLoading:!1,coupon_code:""}},methods:{getProducts:function(){var e=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("124478313","/products")).then((function(t){e.products=t.data.products,e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"錯誤訊息")}))},getProduct:function(e){this.$router.push("/user/product/".concat(e))},addToCart:function(e){var t=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o={product_id:e,qty:c};this.status.loadingItem=e,this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("124478313","/cart"),{data:o}).then((function(e){t.status.loadingItem="",t.isLoading=!1,t.$httpMessageState(e,"加入購物車"),t.getCart()})).catch((function(e){t.isLoading=!1,t.$httpMessageState(e.response,"錯誤訊息")}))},getCart:function(){var e=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("124478313","/cart")).then((function(t){e.cart=t.data.data,e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"錯誤訊息")}))},deleteAllCarts:function(){var e=this;this.isLoading=!0,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("124478313","/carts")).then((function(t){e.$httpMessageState(t,"清除購物車"),e.getCart(),e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"清除購物車")}))},removeItem:function(e){var t=this;this.status.loadingItem=e;var c="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("124478313","/cart/").concat(e);this.isLoading=!0,this.$http.delete(c).then((function(e){t.$httpMessageState(e,"移除購物車品項"),t.status.loadingItem="",t.isLoading=!1,t.getCart()})).catch((function(e){t.isLoading=!1,t.$httpMessageState(e.response,"移除購物車品項")}))},updateCart:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("124478313","/cart/").concat(e.id),o={product_id:e.product_id,qty:e.qty};this.$http.put(c,{data:o}).then((function(e){t.$httpMessageState(e,"更新購物車"),t.isLoading=!1,t.getCart()})).catch((function(e){t.isLoading=!1,t.$httpMessageState(e.response,"更新購物車")}))},addCouponCode:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("124478313","/coupon"),c={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:c}).then((function(t){e.$httpMessageState(t,"加入優惠券"),e.isLoading=!1,e.getCart()})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"加入優惠券")}))},createOrder:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("124478313","/order"),c=this.form;this.$http.post(t,{data:c}).then((function(t){e.$router.push("/user/checkout/".concat(t.data.orderId)),e.$refs.form.resetForm(),e.$httpMessageState(t,"建立訂單"),e.isLoading=!1,e.getCart()})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"建立訂單")}))}},created:function(){this.getProducts(),this.getCart()}},Z=c("6b0d"),ee=c.n(Z);const te=ee()(Y,[["render",X]]);t["default"]=te},8418:function(e,t,c){"use strict";var o=c("c04e"),n=c("9bf2"),a=c("5c6c");e.exports=function(e,t,c){var r=o(t);r in e?n.f(e,r,a(0,c)):e[r]=c}},"99af":function(e,t,c){"use strict";var o=c("23e7"),n=c("d039"),a=c("e8b5"),r=c("861d"),l=c("7b0b"),s=c("50c4"),i=c("8418"),d=c("65f0"),u=c("1dde"),b=c("b622"),m=c("2d00"),p=b("isConcatSpreadable"),h=9007199254740991,O="Maximum allowed index exceeded",j=m>=51||!n((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),f=u("concat"),g=function(e){if(!r(e))return!1;var t=e[p];return void 0!==t?!!t:a(e)},V=!j||!f;o({target:"Array",proto:!0,forced:V},{concat:function(e){var t,c,o,n,a,r=l(this),u=d(r,0),b=0;for(t=-1,o=arguments.length;t<o;t++)if(a=-1===t?r:arguments[t],g(a)){if(n=s(a.length),b+n>h)throw TypeError(O);for(c=0;c<n;c++,b++)c in a&&i(u,b,a[c])}else{if(b>=h)throw TypeError(O);i(u,b++,a)}return u.length=b,u}})},b0c0:function(e,t,c){var o=c("83ab"),n=c("9bf2").f,a=Function.prototype,r=a.toString,l=/^\s*function ([^ (]*)/,s="name";o&&!(s in a)&&n(a,s,{configurable:!0,get:function(){try{return r.call(this).match(l)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-32a902f4.920cee91.js.map